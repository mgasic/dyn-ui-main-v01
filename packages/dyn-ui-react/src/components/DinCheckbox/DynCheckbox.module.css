/**
 * DinCheckbox Component Styles - 100% Design Token Compliance
 * 
 * Dio Input familije: Koristi identične tokene kao DinInput
 * Varijante: checked, unchecked, indeterminate
 * Stanja: default, disabled, error, success, focused
 * Dark mode: Podržano
 * A11y: WCAG AA+ (focus ring, aria attributes)
 */

/* ============================================
   COMPONENT TOKENS - Inherited from Input Family
   ============================================ */

:root {
  /* Checkbox inherits all Input family tokens from DinInput */
  /* Foundation tokens already defined in DinInput.module.css */

  /* Checkbox-specific tokens */
  --dyn-checkbox-size: 20px;
  --dyn-checkbox-size-small: 16px;
  --dyn-checkbox-size-large: 24px;
  --dyn-checkbox-border-radius: var(--dyn-border-radius-sm, 4px);
  --dyn-checkbox-checked-bg: var(--dyn-color-primary-60, #007ACC);
  --dyn-checkbox-checked-border: var(--dyn-color-primary-60, #007ACC);
  --dyn-checkbox-unchecked-bg: var(--dyn-color-white, #FFFFFF);
  --dyn-checkbox-unchecked-border: var(--dyn-border-color-default, #D0D0D0);
  --dyn-checkbox-checkmark-color: var(--dyn-color-white, #FFFFFF);
  --dyn-checkbox-focus-ring: 0 0 0 3px rgba(0, 122, 204, 0.2);
  --dyn-checkbox-transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Checkbox error/success inherit from Input tokens */
  --dyn-checkbox-error-border: var(--dyn-color-danger-60, #DC3545);
  --dyn-checkbox-success-border: var(--dyn-color-success-60, #28A745);
  --dyn-checkbox-success-bg: var(--dyn-color-success-60, #28A745);
  --dyn-checkbox-disabled-opacity: 0.5;
}

/* ============================================
   DARK MODE OVERRIDES
   ============================================ */

@media (prefers-color-scheme: dark) {
  :root {
    --dyn-checkbox-unchecked-bg: var(--dyn-color-gray-100, #333333);
    --dyn-checkbox-unchecked-border: var(--dyn-border-color-default, #404040);
    --dyn-checkbox-focus-ring: 0 0 0 3px rgba(0, 122, 204, 0.3);
  }
}

/* ============================================
   HIGH CONTRAST MODE
   ============================================ */

@media (prefers-contrast: more) {
  :root {
    --dyn-checkbox-size: 22px;
  }
}

/* ============================================
   CHECKBOX CONTAINER
   ============================================ */

.checkboxGroup {
  display: flex;
  align-items: center;
  gap: var(--dyn-spacing-2, 8px);
  cursor: pointer;
  user-select: none;
}

.checkboxGroup:focus-within {
  outline: none;
}

/* ============================================
   CHECKBOX INPUT (Hidden)
   ============================================ */

.checkboxInput {
  position: absolute;
  opacity: 0;
  cursor: pointer;
  width: 0;
  height: 0;
}

/* ============================================
   CHECKBOX VISUAL (Visible element)
   ============================================ */

.checkbox {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: var(--dyn-checkbox-size, 20px);
  height: var(--dyn-checkbox-size, 20px);
  border: var(--dyn-border-width, 1px) solid var(--dyn-checkbox-unchecked-border, var(--dyn-border-color-default, #D0D0D0));
  background-color: var(--dyn-checkbox-unchecked-bg, var(--dyn-color-white, #FFFFFF));
  border-radius: var(--dyn-checkbox-border-radius, var(--dyn-border-radius-sm, 4px));
  transition: var(--dyn-checkbox-transition, all 250ms cubic-bezier(0.4, 0, 0.2, 1));
  flex-shrink: 0;
}

/* ============================================
   CHECKBOX CHECKED STATE
   ============================================ */

.checkboxInput:checked + .checkbox {
  background-color: var(--dyn-checkbox-checked-bg, var(--dyn-color-primary-60, #007ACC));
  border-color: var(--dyn-checkbox-checked-border, var(--dyn-color-primary-60, #007ACC));
}

/* Checkmark icon (SVG) */
.checkboxCheckmark {
  display: none;
  width: calc(var(--dyn-checkbox-size, 20px) * 0.6);
  height: calc(var(--dyn-checkbox-size, 20px) * 0.6);
  stroke: var(--dyn-checkbox-checkmark-color, var(--dyn-color-white, #FFFFFF));
  stroke-width: 2;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
}

.checkboxInput:checked + .checkbox .checkboxCheckmark {
  display: block;
}

/* ============================================
   CHECKBOX FOCUS STATE
   ============================================ */

.checkboxInput:focus-visible + .checkbox {
  box-shadow: var(--dyn-checkbox-focus-ring, 0 0 0 3px rgba(0, 122, 204, 0.2));
  outline: 2px solid var(--dyn-color-primary-60, #007ACC);
  outline-offset: 2px;
}

/* ============================================
   CHECKBOX SIZE VARIANTS
   ============================================ */

.checkboxSmall .checkbox {
  width: var(--dyn-checkbox-size-small, 16px);
  height: var(--dyn-checkbox-size-small, 16px);
}

.checkboxSmall .checkboxCheckmark {
  width: calc(var(--dyn-checkbox-size-small, 16px) * 0.6);
  height: calc(var(--dyn-checkbox-size-small, 16px) * 0.6);
}

.checkboxLarge .checkbox {
  width: var(--dyn-checkbox-size-large, 24px);
  height: var(--dyn-checkbox-size-large, 24px);
}

.checkboxLarge .checkboxCheckmark {
  width: calc(var(--dyn-checkbox-size-large, 24px) * 0.6);
  height: calc(var(--dyn-checkbox-size-large, 24px) * 0.6);
}

/* ============================================
   CHECKBOX STATE: ERROR
   ============================================ */

.checkboxError .checkbox {
  border-color: var(--dyn-checkbox-error-border, var(--dyn-color-danger-60, #DC3545));
  background-color: rgba(220, 53, 69, 0.05);
}

.checkboxError.checkboxInput:checked + .checkbox {
  background-color: var(--dyn-checkbox-error-border, var(--dyn-color-danger-60, #DC3545));
  border-color: var(--dyn-checkbox-error-border, var(--dyn-color-danger-60, #DC3545));
}

/* ============================================
   CHECKBOX STATE: SUCCESS
   ============================================ */

.checkboxSuccess .checkbox {
  border-color: var(--dyn-checkbox-success-border, var(--dyn-color-success-60, #28A745));
  background-color: rgba(40, 167, 69, 0.05);
}

.checkboxSuccess.checkboxInput:checked + .checkbox {
  background-color: var(--dyn-checkbox-success-bg, var(--dyn-color-success-60, #28A745));
  border-color: var(--dyn-checkbox-success-border, var(--dyn-color-success-60, #28A745));
}

/* ============================================
   CHECKBOX STATE: DISABLED
   ============================================ */

.checkboxInput:disabled + .checkbox,
.checkboxDisabled .checkbox {
  opacity: var(--dyn-checkbox-disabled-opacity, 0.5);
  cursor: not-allowed;
  pointer-events: none;
}

.checkboxInput:disabled ~ .checkboxLabel,
.checkboxDisabled ~ .checkboxLabel {
  opacity: var(--dyn-checkbox-disabled-opacity, 0.5);
  cursor: not-allowed;
}

/* ============================================
   CHECKBOX STATE: INDETERMINATE
   ============================================ */

.checkboxIndeterminate .checkbox {
  background-color: var(--dyn-checkbox-checked-bg, var(--dyn-color-primary-60, #007ACC));
  border-color: var(--dyn-checkbox-checked-border, var(--dyn-color-primary-60, #007ACC));
}

.checkboxIndeterminateMark {
  display: none;
  width: calc(var(--dyn-checkbox-size, 20px) * 0.5);
  height: 2px;
  background-color: var(--dyn-checkbox-checkmark-color, var(--dyn-color-white, #FFFFFF));
  border-radius: 1px;
}

.checkboxIndeterminate .checkboxIndeterminateMark {
  display: block;
}

.checkboxIndeterminate .checkboxCheckmark {
  display: none;
}

/* ============================================
   CHECKBOX LABEL
   ============================================ */

.checkboxLabel {
  font-size: var(--dyn-input-label-font-size, var(--dyn-font-size-base, 14px));
  font-weight: var(--dyn-font-weight-regular, 400);
  color: var(--dyn-input-label-text, var(--dyn-color-gray-900, #1A1A1A));
  cursor: pointer;
  transition: var(--dyn-checkbox-transition, all 250ms cubic-bezier(0.4, 0, 0.2, 1));
  line-height: var(--dyn-line-height-normal, 1.5);
}

.checkboxGroup:hover .checkboxLabel {
  /* Optional: subtle hover effect */
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

/* High contrast mode */
@media (prefers-contrast: more) {
  .checkbox {
    border-width: 2px;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .checkbox,
  .checkboxLabel {
    transition: none !important;
  }
}

/* ============================================
   RESPONSIVE
   ============================================ */

@media (max-width: 480px) {
  .checkboxGroup {
    gap: var(--dyn-spacing-2, 8px);
  }

  .checkbox {
    width: var(--dyn-checkbox-size-large, 24px);
    height: var(--dyn-checkbox-size-large, 24px);
  }

  .checkboxCheckmark {
    width: calc(var(--dyn-checkbox-size-large, 24px) * 0.6);
    height: calc(var(--dyn-checkbox-size-large, 24px) * 0.6);
  }
}
