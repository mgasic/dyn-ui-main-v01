/**
 * DinSelect Component Styles - 100% Design Token Compliance
 * 
 * Dio Input familije: Koristi identične tokene kao DinInput
 * Varijante: closed, open
 * Stanja: default, disabled, error, success, focused
 * Dark mode: Podržano
 * A11y: WCAG AA+ (focus ring, aria attributes)
 */

/* ============================================
   COMPONENT TOKENS - Inherited from Input Family
   ============================================ */

:root {
  /* Select inherits all Input family tokens from DinInput */
  /* Foundation tokens already defined in DinInput.module.css */

  /* Select-specific tokens */
  --dyn-select-height: 40px;
  --dyn-select-height-small: 32px;
  --dyn-select-height-large: 48px;
  --dyn-select-padding-x: var(--dyn-spacing-3, 12px);
  --dyn-select-padding-y: var(--dyn-spacing-2, 8px);
  --dyn-select-border: 1px solid var(--dyn-border-color-default, #D0D0D0);
  --dyn-select-border-radius: 4px;
  --dyn-select-bg: var(--dyn-color-white, #FFFFFF);
  --dyn-select-text: var(--dyn-color-gray-900, #1A1A1A);
  --dyn-select-text-disabled: rgba(26, 26, 26, 0.5);
  --dyn-select-placeholder-text: var(--dyn-color-gray-600, #606060);
  --dyn-select-icon-color: var(--dyn-color-gray-600, #606060);
  --dyn-select-icon-size: 20px;
  --dyn-select-focus-border: var(--dyn-color-primary-60, #007ACC);
  --dyn-select-focus-ring: 0 0 0 3px rgba(0, 122, 204, 0.2);
  --dyn-select-open-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
  --dyn-select-transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);

  /* Dropdown specific */
  --dyn-select-dropdown-bg: var(--dyn-color-white, #FFFFFF);
  --dyn-select-dropdown-border: var(--dyn-border-color-default, #D0D0D0);
  --dyn-select-dropdown-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
  --dyn-select-option-padding: var(--dyn-spacing-2, 8px) var(--dyn-spacing-3, 12px);
  --dyn-select-option-hover-bg: rgba(0, 122, 204, 0.1);
  --dyn-select-option-selected-bg: rgba(0, 122, 204, 0.15);
  --dyn-select-option-selected-color: var(--dyn-color-primary-60, #007ACC);
  --dyn-select-option-disabled-opacity: 0.5;

  /* Select error/success inherit from Input tokens */
  --dyn-select-error-border: var(--dyn-color-danger-60, #DC3545);
  --dyn-select-success-border: var(--dyn-color-success-60, #28A745);
  --dyn-select-disabled-opacity: 0.5;
}

/* ============================================
   DARK MODE OVERRIDES
   ============================================ */

@media (prefers-color-scheme: dark) {
  :root {
    --dyn-select-bg: var(--dyn-color-gray-800, #242424);
    --dyn-select-text: var(--dyn-color-gray-100, #E0E0E0);
    --dyn-select-text-disabled: rgba(224, 224, 224, 0.5);
    --dyn-select-placeholder-text: var(--dyn-color-gray-400, #999999);
    --dyn-select-icon-color: var(--dyn-color-gray-400, #999999);
    --dyn-select-border: 1px solid var(--dyn-color-gray-600, #404040);
    --dyn-select-dropdown-bg: var(--dyn-color-gray-800, #242424);
    --dyn-select-dropdown-border: var(--dyn-color-gray-600, #404040);
    --dyn-select-option-hover-bg: rgba(0, 122, 204, 0.2);
    --dyn-select-option-selected-bg: rgba(0, 122, 204, 0.25);
    --dyn-select-focus-ring: 0 0 0 3px rgba(0, 122, 204, 0.3);
  }
}

/* ============================================
   HIGH CONTRAST MODE
   ============================================ */

@media (prefers-contrast: more) {
  :root {
    --dyn-select-border: 2px solid var(--dyn-border-color-default, #D0D0D0);
  }
}

/* ============================================
   SELECT CONTAINER
   ============================================ */

.selectContainer {
  position: relative;
  display: inline-block;
  width: 100%;
}

.selectContainer:focus-within {
  outline: none;
}

/* ============================================
   SELECT TRIGGER (Button)
   ============================================ */

.select {
  display: flex;
  align-items: center;
  justify-content: space-between;
  width: 100%;
  height: var(--dyn-select-height, 40px);
  padding: var(--dyn-select-padding-y, 8px) var(--dyn-select-padding-x, 12px);
  background-color: var(--dyn-select-bg, var(--dyn-color-white, #FFFFFF));
  border: var(--dyn-select-border, 1px solid var(--dyn-border-color-default, #D0D0D0));
  border-radius: var(--dyn-select-border-radius, 4px);
  color: var(--dyn-select-text, var(--dyn-color-gray-900, #1A1A1A));
  font-size: var(--dyn-font-size-base, 14px);
  font-weight: var(--dyn-font-weight-regular, 400);
  cursor: pointer;
  transition: var(--dyn-select-transition, all 250ms cubic-bezier(0.4, 0, 0.2, 1));
  user-select: none;
}

.select:hover {
  border-color: var(--dyn-color-primary-60, #007ACC);
}

/* ============================================
   SELECT LABEL (Text)
   ============================================ */

.selectLabel {
  flex: 1;
  color: var(--dyn-select-text, var(--dyn-color-gray-900, #1A1A1A));
  font-size: var(--dyn-font-size-base, 14px);
  line-height: var(--dyn-line-height-normal, 1.5);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.selectLabel.placeholder {
  color: var(--dyn-select-placeholder-text, var(--dyn-color-gray-600, #606060));
}

/* ============================================
   SELECT ICON (Chevron)
   ============================================ */

.selectIcon {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--dyn-select-icon-size, 20px);
  height: var(--dyn-select-icon-size, 20px);
  color: var(--dyn-select-icon-color, var(--dyn-color-gray-600, #606060));
  flex-shrink: 0;
  margin-left: var(--dyn-spacing-2, 8px);
  transition: var(--dyn-select-transition, all 250ms cubic-bezier(0.4, 0, 0.2, 1));
}

/* Chevron rotation when open */
.selectContainer.open .selectIcon {
  transform: rotate(180deg);
}

/* ============================================
   SELECT FOCUS STATE
   ============================================ */

.select:focus-visible {
  border-color: var(--dyn-select-focus-border, var(--dyn-color-primary-60, #007ACC));
  box-shadow: var(--dyn-select-focus-ring, 0 0 0 3px rgba(0, 122, 204, 0.2));
  outline: none;
}

.selectContainer.focused .select {
  border-color: var(--dyn-select-focus-border, var(--dyn-color-primary-60, #007ACC));
  box-shadow: var(--dyn-select-focus-ring, 0 0 0 3px rgba(0, 122, 204, 0.2));
}

/* ============================================
   SELECT SIZE VARIANTS
   ============================================ */

.selectSmall {
  height: var(--dyn-select-height-small, 32px);
  font-size: var(--dyn-font-size-small, 12px);
}

.selectLarge {
  height: var(--dyn-select-height-large, 48px);
  font-size: var(--dyn-font-size-lg, 16px);
}

/* ============================================
   SELECT STATE: ERROR
   ============================================ */

.selectError {
  border-color: var(--dyn-select-error-border, var(--dyn-color-danger-60, #DC3545));
  background-color: rgba(220, 53, 69, 0.05);
}

.selectError:hover,
.selectError:focus-visible {
  border-color: var(--dyn-select-error-border, var(--dyn-color-danger-60, #DC3545));
  box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.2);
}

/* ============================================
   SELECT STATE: SUCCESS
   ============================================ */

.selectSuccess {
  border-color: var(--dyn-select-success-border, var(--dyn-color-success-60, #28A745));
  background-color: rgba(40, 167, 69, 0.05);
}

.selectSuccess:hover,
.selectSuccess:focus-visible {
  border-color: var(--dyn-select-success-border, var(--dyn-color-success-60, #28A745));
  box-shadow: 0 0 0 3px rgba(40, 167, 69, 0.2);
}

/* ============================================
   SELECT STATE: DISABLED
   ============================================ */

.selectDisabled,
.select:disabled {
  opacity: var(--dyn-select-disabled-opacity, 0.5);
  cursor: not-allowed;
  pointer-events: none;
}

.selectDisabled .selectLabel {
  color: var(--dyn-select-text-disabled, rgba(26, 26, 26, 0.5));
}

/* ============================================
   DROPDOWN MENU
   ============================================ */

.dropdown {
  position: absolute;
  top: calc(100% + 4px);
  left: 0;
  right: 0;
  background-color: var(--dyn-select-dropdown-bg, var(--dyn-color-white, #FFFFFF));
  border: 1px solid var(--dyn-select-dropdown-border, var(--dyn-border-color-default, #D0D0D0));
  border-radius: var(--dyn-select-border-radius, 4px);
  box-shadow: var(--dyn-select-open-shadow, 0 10px 20px rgba(0, 0, 0, 0.1));
  z-index: 1000;
  max-height: 300px;
  overflow-y: auto;
  display: none;
  animation: slideDown 250ms cubic-bezier(0.4, 0, 0.2, 1) forwards;
}

.selectContainer.open .dropdown {
  display: block;
}

/* ============================================
   DROPDOWN OPTIONS
   ============================================ */

.option {
  padding: var(--dyn-select-option-padding, 8px 12px);
  color: var(--dyn-select-text, var(--dyn-color-gray-900, #1A1A1A));
  font-size: var(--dyn-font-size-base, 14px);
  cursor: pointer;
  transition: var(--dyn-select-transition, all 250ms cubic-bezier(0.4, 0, 0.2, 1));
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.option:hover {
  background-color: var(--dyn-select-option-hover-bg, rgba(0, 122, 204, 0.1));
}

.option.selected {
  background-color: var(--dyn-select-option-selected-bg, rgba(0, 122, 204, 0.15));
  color: var(--dyn-select-option-selected-color, var(--dyn-color-primary-60, #007ACC));
  font-weight: var(--dyn-font-weight-medium, 500);
}

.option.disabled {
  opacity: var(--dyn-select-option-disabled-opacity, 0.5);
  cursor: not-allowed;
  pointer-events: none;
}

/* ============================================
   OPTION INDICATOR (Checkmark)
   ============================================ */

.optionIndicator {
  display: none;
  color: var(--dyn-select-option-selected-color, var(--dyn-color-primary-60, #007ACC));
  font-weight: bold;
  margin-right: var(--dyn-spacing-2, 8px);
}

.option.selected .optionIndicator {
  display: inline;
}

/* ============================================
   DROPDOWN ANIMATIONS
   ============================================ */

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-8px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* ============================================
   SELECT HELPER TEXT
   ============================================ */

.helperText {
  display: block;
  margin-top: var(--dyn-spacing-1, 4px);
  font-size: var(--dyn-font-size-small, 12px);
  font-weight: var(--dyn-font-weight-regular, 400);
  color: var(--dyn-color-gray-600, #606060);
  line-height: var(--dyn-line-height-normal, 1.5);
}

.selectError ~ .helperText {
  color: var(--dyn-color-danger-60, #DC3545);
}

.selectSuccess ~ .helperText {
  color: var(--dyn-color-success-60, #28A745);
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

/* High contrast mode */
@media (prefers-contrast: more) {
  .select {
    border-width: 2px;
  }

  .select:focus-visible {
    outline: 2px solid var(--dyn-color-primary-60, #007ACC);
    outline-offset: 2px;
  }
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .select,
  .selectIcon,
  .option,
  .dropdown {
    transition: none !important;
    animation: none !important;
  }
}

/* ============================================
   RESPONSIVE
   ============================================ */

@media (max-width: 480px) {
  .select {
    height: var(--dyn-select-height-large, 48px);
    font-size: var(--dyn-font-size-base, 14px);
  }

  .dropdown {
    max-height: 250px;
  }

  .option {
    padding: var(--dyn-spacing-2, 8px) var(--dyn-spacing-3, 12px);
  }
}
