/* ==========================================================================
   DynButton Component - Option B: Full Token Integration
   100% Design Token Compliance
   ========================================================================== */

/* ================================================
   COMPONENT TOKENS (Layer 2)
   Per COMPLETE_KNOWLEDGE_BASE.md lines 320-336
   ================================================ */
:root {
  /* Color tokens - using semantic tokens for auto theme switching */
  --dyn-button-bg: var(--dyn-theme-primary);
  --dyn-button-color: var(--dyn-semantic-text-inverse);
  --dyn-button-border: var(--dyn-theme-primary);

  /* Hover states */
  --dyn-button-bg-hover: var(--dyn-action-hover);
  --dyn-button-color-hover: var(--dyn-semantic-text-inverse);
  --dyn-button-border-hover: var(--dyn-action-hover);

  /* Active states */
  --dyn-button-bg-active: var(--dyn-action-pressed);
  --dyn-button-color-active: var(--dyn-semantic-text-inverse);
  --dyn-button-border-active: var(--dyn-action-pressed);

  /* Disabled states */
  --dyn-button-bg-disabled: var(--dyn-action-disabled);
  --dyn-button-color-disabled: var(--dyn-semantic-text-muted);
  --dyn-button-border-disabled: var(--dyn-action-disabled);

  /* Sizing tokens */
  --dyn-button-padding-y: var(--dyn-spacing-sm);
  --dyn-button-padding-x: var(--dyn-spacing-md);
  --dyn-button-gap: var(--dyn-spacing-sm);
  --dyn-button-min-height: 2.5rem;
  --dyn-button-font-size: var(--dyn-font-size-sm);
  --dyn-button-font-weight: var(--dyn-font-weight-medium);
  --dyn-button-border-radius: var(--dyn-border-radius-md);
  --dyn-button-border-width: var(--dyn-border-width-sm);

  /* Effects */
  --dyn-button-shadow: none;
  --dyn-button-shadow-hover: var(--dyn-elevation-low);
  --dyn-button-shadow-active: none;
  --dyn-button-shadow-focus: var(--dyn-semantic-border-focus);
  --dyn-button-transition: var(--dyn-transition-fast);
  --dyn-button-opacity-disabled: 0.56;
}

/* ================================================
   BASE STYLES
   ================================================ */
.root {
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--dyn-button-gap);
  padding: var(--dyn-button-padding-y) var(--dyn-button-padding-x);
  min-height: var(--dyn-button-min-height);
  border-radius: var(--dyn-button-border-radius);
  border: var(--dyn-button-border-width) solid var(--dyn-button-border);
  background-color: var(--dyn-button-bg);
  color: var(--dyn-button-color);
  font-family: inherit;
  font-size: var(--dyn-button-font-size);
  font-weight: var(--dyn-button-font-weight);
  line-height: 1.5;
  text-decoration: none;
  cursor: pointer;
  user-select: none;
  box-shadow: var(--dyn-button-shadow);
  transition:
    background-color var(--dyn-button-transition),
    color var(--dyn-button-transition),
    border-color var(--dyn-button-transition),
    box-shadow var(--dyn-button-transition),
    transform var(--dyn-button-transition);
}

/* ================================================
   INTERACTIVE STATES
   ================================================ */
.root:focus-visible {
  outline: var(--dyn-border-width-lg) solid var(--dyn-button-shadow-focus);
  outline-offset: var(--dyn-spacing-2xs);
  z-index: 1;
}

.root:hover:not(:disabled):not(.loading) {
  background-color: var(--dyn-button-bg-hover);
  border-color: var(--dyn-button-border-hover);
  color: var(--dyn-button-color-hover);
  box-shadow: var(--dyn-button-shadow-hover);
  transform: translateY(-1px);
}

.root:active:not(:disabled):not(.loading) {
  background-color: var(--dyn-button-bg-active);
  border-color: var(--dyn-button-border-active);
  color: var(--dyn-button-color-active);
  box-shadow: var(--dyn-button-shadow-active);
  transform: translateY(0);
}

.root:disabled {
  background-color: var(--dyn-button-bg-disabled);
  border-color: var(--dyn-button-border-disabled);
  color: var(--dyn-button-color-disabled);
  cursor: not-allowed;
  opacity: var(--dyn-button-opacity-disabled);
  box-shadow: none;
  transform: none;
}

/* ================================================
   KIND VARIANTS (override tokens only)
   ================================================ */
/* kindPrimary uses default tokens - no override needed */

.kindSecondary {
  --dyn-button-bg: transparent;
  --dyn-button-color: var(--dyn-theme-primary);
  --dyn-button-border: var(--dyn-theme-primary);
  --dyn-button-bg-hover: var(--dyn-semantic-surface-hover);
  --dyn-button-color-hover: var(--dyn-action-hover);
  --dyn-button-border-hover: var(--dyn-action-hover);
  --dyn-button-bg-active: var(--dyn-semantic-surface-active);
  --dyn-button-color-active: var(--dyn-action-pressed);
  --dyn-button-border-active: var(--dyn-action-pressed);
}

.kindTertiary {
  --dyn-button-bg: transparent;
  --dyn-button-color: var(--dyn-theme-primary);
  --dyn-button-border: transparent;
  --dyn-button-bg-hover: var(--dyn-semantic-surface-hover);
  --dyn-button-color-hover: var(--dyn-action-hover);
  --dyn-button-border-hover: transparent;
  --dyn-button-bg-active: var(--dyn-semantic-surface-active);
  --dyn-button-color-active: var(--dyn-action-pressed);
  --dyn-button-border-active: transparent;
  --dyn-button-shadow-hover: none;
}

/* ================================================
   SIZE VARIANTS (override sizing tokens)
   ================================================ */
.sizeSmall {
  --dyn-button-padding-y: var(--dyn-spacing-xs);
  --dyn-button-padding-x: var(--dyn-spacing-sm);
  --dyn-button-gap: var(--dyn-spacing-xs);
  --dyn-button-min-height: 2rem;
  --dyn-button-font-size: var(--dyn-font-size-xs);
}

/* sizeMedium uses default tokens - no override needed */
.sizeLarge {
  --dyn-button-padding-y: var(--dyn-spacing-sm);
  --dyn-button-padding-x: var(--dyn-spacing-lg);
  --dyn-button-gap: var(--dyn-spacing-sm);
  --dyn-button-min-height: 3rem;
  --dyn-button-font-size: var(--dyn-font-size-md);
}

/* ================================================
   DANGER VARIANT
   ================================================ */
.danger.kindPrimary {
  --dyn-button-bg: var(--dyn-feedback-negative-default);
  --dyn-button-border: var(--dyn-feedback-negative-default);
  --dyn-button-bg-hover: var(--dyn-feedback-negative-dark);
  --dyn-button-border-hover: var(--dyn-feedback-negative-dark);
  --dyn-button-bg-active: var(--dyn-feedback-negative-darker);
  --dyn-button-border-active: var(--dyn-feedback-negative-darker);
}

.danger.kindSecondary {
  --dyn-button-color: var(--dyn-feedback-negative-default);
  --dyn-button-border: var(--dyn-feedback-negative-default);
  --dyn-button-color-hover: var(--dyn-feedback-negative-dark);
  --dyn-button-border-hover: var(--dyn-feedback-negative-dark);
  --dyn-button-color-active: var(--dyn-feedback-negative-darker);
  --dyn-button-border-active: var(--dyn-feedback-negative-darker);
}

.danger.kindTertiary {
  --dyn-button-color: var(--dyn-feedback-negative-default);
  --dyn-button-color-hover: var(--dyn-feedback-negative-dark);
  --dyn-button-color-active: var(--dyn-feedback-negative-darker);
}

/* ================================================
   UTILITY CLASSES
   ================================================ */
.fullWidth {
  width: 100%;
}

.iconOnly {
  --dyn-button-padding-x: var(--dyn-button-padding-y);
  width: var(--dyn-button-min-height);
  min-width: var(--dyn-button-min-height);
}

.loading {
  pointer-events: none;
}

.loading .content {
  opacity: 0;
}

.visuallyHidden {
  position: absolute;
  width: var(--dyn-border-width-sm);
  height: var(--dyn-border-width-sm);
  padding: 0;
  margin: calc(-1 * var(--dyn-border-width-sm));
  overflow: hidden;
  clip: rect(0 0 0 0);
  white-space: nowrap;
  border: 0;
}

/* ================================================
   LAYOUT ELEMENTS
   ================================================ */
.content {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--dyn-button-gap);
  white-space: nowrap;
  line-height: inherit;
}

.icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 0;
}

.label {
  display: inline-flex;
  align-items: center;
}

.spinner {
  position: absolute;
  inset: 50% auto auto 50%;
  width: 1.25em;
  height: 1.25em;
  border-radius: 50%;
  border: var(--dyn-border-width-md) solid currentColor;
  border-top-color: transparent;
  animation: dynButtonSpin 0.8s linear infinite;
  transform: translate(-50%, -50%);
  z-index: 2;
}

@keyframes dynButtonSpin {
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* ================================================
   RESPONSIVE DESIGN
   ================================================ */
@media (max-width: 767px) {
  .root {
    min-height: 2.75rem;
    /* 44px - Touch target */
  }

  .sizeSmall {
    min-height: 2.5rem;
    /* 40px */
  }

  .sizeLarge {
    min-height: 3.25rem;
    /* 52px */
  }

  .iconOnly {
    min-width: 2.75rem;
    width: 2.75rem;
  }

  .hideOnMobile {
    display: none !important;
  }

  .iconOnlyOnMobile .label {
    display: none !important;
  }

  .iconOnlyOnMobile {
    width: 2.75rem;
    min-width: 2.75rem;
    --dyn-button-padding-x: 0;
    --dyn-button-padding-y: 0;
  }
}

.hideOnMobile {
  display: inherit;
}

.iconOnlyOnMobile {
  display: inline-flex;
}

/* ================================================
   ACCESSIBILITY
   ================================================ */
@media (prefers-reduced-motion: reduce) {
  .root {
    transition: none;
  }

  .spinner {
    animation: none;
  }
}

@media (prefers-contrast: high) {
  .root {
    border-width: var(--dyn-border-width-md);
  }

  .root:focus-visible {
    outline-width: var(--dyn-border-width-xl);
    outline-offset: var(--dyn-spacing-2xs);
  }

  .kindTertiary {
    --dyn-button-border: currentColor;
    border-width: var(--dyn-border-width-sm);
  }
}

/* ================================================
   DARK MODE
   Note: Handled automatically via semantic tokens!
   No explicit overrides needed for Option B.
   ================================================ */