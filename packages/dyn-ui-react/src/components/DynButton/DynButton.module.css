/**
 * DynButton Component Styles
 * 100% Design Token Compliance
 * Unified Token Strategy: 3-Level Fallback Pattern
 */

.root {
  /* ==========================================================================
     COMPONENT TOKENS (Layer 2)
     ========================================================================== */
  
  /* Color Tokens */
  --dyn-button-bg: var(--dyn-button-root-backgroundColor, var(--dyn-theme-primary, #2563eb));
  --dyn-button-color: var(--dyn-button-root-textColor, var(--dyn-semantic-text-inverse, #ffffff));
  --dyn-button-border: var(--dyn-button-root-borderColor, var(--dyn-theme-primary, #2563eb));

  /* Hover States */
  --dyn-button-bg-hover: var(--dyn-button-root-hover-backgroundColor, var(--dyn-theme-primary-dark, #1e40af));
  --dyn-button-color-hover: var(--dyn-button-root-hover-textColor, var(--dyn-semantic-text-inverse, #ffffff));
  --dyn-button-border-hover: var(--dyn-button-root-hover-borderColor, var(--dyn-theme-primary-dark, #1e40af));

  /* Active States */
  --dyn-button-bg-active: var(--dyn-button-root-active-backgroundColor, var(--dyn-theme-primary-darker, #1e3a8a));
  --dyn-button-color-active: var(--dyn-button-root-active-textColor, var(--dyn-semantic-text-inverse, #ffffff));
  --dyn-button-border-active: var(--dyn-button-root-active-borderColor, var(--dyn-theme-primary-darker, #1e3a8a));

  /* Disabled States */
  --dyn-button-bg-disabled: var(--dyn-button-state-disabled-background, var(--dyn-neutral-light-300, #e0e0e0));
  --dyn-button-color-disabled: var(--dyn-button-state-disabled-text, var(--dyn-neutral-mid-600, #757575));
  --dyn-button-border-disabled: var(--dyn-button-state-disabled-background, var(--dyn-neutral-light-300, #e0e0e0));
  --dyn-button-opacity-disabled: var(--dyn-button-state-disabled-opacity, var(--dyn-opacity-50, 0.5));

  /* Sizing Tokens */
  --dyn-button-padding-y: var(--dyn-spacing-sm, 0.625rem);
  --dyn-button-padding-x: var(--dyn-spacing-md, 1.25rem);
  --dyn-button-gap: var(--dyn-button-root-gap, var(--dyn-spacing-sm, 0.5rem));
  --dyn-button-min-height: var(--dyn-button-size-minHeight-medium, 2.75rem);
  --dyn-button-font-size: var(--dyn-button-root-fontSize, var(--dyn-font-size-sm, 0.875rem));
  --dyn-button-font-weight: var(--dyn-button-root-fontWeight, var(--dyn-font-weight-semibold, 600));
  --dyn-button-border-radius: var(--dyn-button-root-borderRadius, var(--dyn-border-radius-md, 0.375rem));
  --dyn-button-border-width: var(--dyn-button-root-borderWidth, var(--dyn-border-width-sm, 1px));

  /* Effects */
  --dyn-button-shadow: none;
  --dyn-button-shadow-hover: var(--dyn-shadow-elevation-low, 0 1px 2px rgba(0, 0, 0, 0.05));
  --dyn-button-shadow-active: none;
  --dyn-button-shadow-focus: var(--dyn-semantic-border-focus, #3b82f6);
  --dyn-button-transition: var(--dyn-button-root-transition, var(--dyn-duration-fast, 150ms)) var(--dyn-easing-ease-in-out, ease-in-out);

  /* ==========================================================================
     BASE STYLES
     ========================================================================== */
  position: relative;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--dyn-button-gap);
  padding: var(--dyn-button-padding-y) var(--dyn-button-padding-x);
  min-height: var(--dyn-button-min-height);
  border-radius: var(--dyn-button-border-radius);
  border: var(--dyn-button-border-width) solid var(--dyn-button-border);
  background-color: var(--dyn-button-bg);
  color: var(--dyn-button-color);
  font-family: var(--dyn-font-family-base, inherit);
  font-size: var(--dyn-button-font-size);
  font-weight: var(--dyn-button-font-weight);
  line-height: var(--dyn-typography-lineHeight-normal, 1.5);
  text-decoration: none;
  cursor: pointer;
  user-select: none;
  box-shadow: var(--dyn-button-shadow);
  appearance: none;
  transition: all var(--dyn-button-transition);
}

/* Firefox reset */
.root::-moz-focus-inner {
  border: 0;
  padding: 0;
}

/* INTERACTIVE STATES */
.root:focus-visible {
  outline: var(--dyn-border-width-md, 0.125rem) solid var(--dyn-button-shadow-focus);
  outline-offset: var(--dyn-spacing-2xs, 0.125rem);
  z-index: 1;
}

.root:hover:not(:disabled):not(.loading) {
  background-color: var(--dyn-button-bg-hover);
  border-color: var(--dyn-button-border-hover);
  color: var(--dyn-button-color-hover);
  box-shadow: var(--dyn-button-shadow-hover);
  transform: translateY(-1px);
}

.root:active:not(:disabled):not(.loading) {
  background-color: var(--dyn-button-bg-active);
  border-color: var(--dyn-button-border-active);
  color: var(--dyn-button-color-active);
  box-shadow: var(--dyn-button-shadow-active);
  transform: translateY(0);
}

.root:disabled {
  background-color: var(--dyn-button-bg-disabled);
  border-color: var(--dyn-button-border-disabled);
  color: var(--dyn-button-color-disabled);
  cursor: not-allowed;
  opacity: var(--dyn-button-opacity-disabled);
  box-shadow: none;
  transform: none;
}

/* ==========================================================================
   KIND VARIANTS
   ========================================================================== */

.kindPrimary {
  color: inherit;
}

.kindSecondary {
  --dyn-button-bg: var(--dyn-button-color-secondary-background, var(--dyn-theme-secondary, #64748b));
  --dyn-button-color: var(--dyn-button-color-secondary-text, var(--dyn-semantic-text-inverse, #ffffff));
  --dyn-button-border: var(--dyn-button-color-secondary-border, var(--dyn-theme-secondary, #64748b));
  --dyn-button-bg-hover: var(--dyn-button-color-secondary-hover-background, var(--dyn-theme-secondary-dark, #475569));
  --dyn-button-border-hover: var(--dyn-button-color-secondary-hover-background, var(--dyn-theme-secondary-dark, #475569));
  /* Ensure text remains readable on hover */
  --dyn-button-color-hover: var(--dyn-button-color-secondary-text, var(--dyn-semantic-text-inverse, #ffffff));
}

.kindTertiary {
  --dyn-button-bg: var(--dyn-button-color-tertiary-background, transparent);
  --dyn-button-color: var(--dyn-button-color-tertiary-text, var(--dyn-theme-primary, #2563eb));
  --dyn-button-border: var(--dyn-button-color-tertiary-border, transparent);
  --dyn-button-bg-hover: var(--dyn-button-color-tertiary-hover-background, var(--dyn-semantic-surface-hover, #f3f4f6));
  --dyn-button-border-hover: var(--dyn-button-color-tertiary-hover-background, var(--dyn-semantic-surface-hover, #f3f4f6));
  /* Fix: explicitly use primary color for hover text instead of inheriting base white */
  --dyn-button-color-hover: var(--dyn-button-color-tertiary-text, var(--dyn-theme-primary, #2563eb));
  --dyn-button-shadow-hover: none;
}

.danger {
  --dyn-button-bg: var(--dyn-button-color-danger-background, var(--dyn-feedback-negative-default, #dc2626));
  --dyn-button-color: var(--dyn-button-color-danger-text, var(--dyn-semantic-text-inverse, #ffffff));
  --dyn-button-border: var(--dyn-button-color-danger-border, var(--dyn-feedback-negative-default, #dc2626));
  --dyn-button-bg-hover: var(--dyn-button-color-danger-hover-background, var(--dyn-feedback-negative-dark, #b91c1c));
  --dyn-button-border-hover: var(--dyn-button-color-danger-hover-background, var(--dyn-feedback-negative-dark, #b91c1c));
}

/* ==========================================================================
   SIZE VARIANTS
   ========================================================================== */

.sizeSmall {
  --dyn-button-padding-y: var(--dyn-spacing-xs, 0.25rem);
  --dyn-button-padding-x: var(--dyn-button-size-padding-small, var(--dyn-spacing-sm, 0.5rem));
  --dyn-button-min-height: var(--dyn-button-size-minHeight-small, 2rem);
  --dyn-button-font-size: var(--dyn-button-size-fontSize-small, var(--dyn-font-size-xs, 0.75rem));
}

.sizeMedium {
  /* Medium - default button size with explicit values */
  --dyn-button-padding-y: var(--dyn-spacing-sm, 0.5rem);
  --dyn-button-padding-x: var(--dyn-button-size-padding-medium, var(--dyn-spacing-md, 1rem));
  --dyn-button-min-height: var(--dyn-button-size-minHeight-medium, 2.5rem);
  --dyn-button-font-size: var(--dyn-button-size-fontSize-medium, var(--dyn-font-size-sm, 0.875rem));
}

.sizeLarge {
  --dyn-button-padding-y: var(--dyn-spacing-md, 1rem);
  --dyn-button-padding-x: var(--dyn-button-size-padding-large, var(--dyn-spacing-lg, 1.5rem));
  --dyn-button-min-height: var(--dyn-button-size-minHeight-large, 3rem);
  --dyn-button-font-size: var(--dyn-button-size-fontSize-large, var(--dyn-font-size-md, 1rem));
}

/* ==========================================================================
   UTILITY CLASSES
   ========================================================================== */

.fullWidth {
  width: 100%;
}

.iconOnly {
  padding-left: 0;
  padding-right: 0;
  width: var(--dyn-button-min-height);
  min-width: var(--dyn-button-min-height);
}

.loading {
  pointer-events: none;
  cursor: wait;
}

.loading .content {
  opacity: 0;
}

.visuallyHidden {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* ==========================================================================
   LAYOUT ELEMENTS
   ========================================================================== */

.content {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--dyn-button-gap);
  white-space: nowrap;
  line-height: inherit;
  transition: opacity var(--dyn-button-transition);
}

.icon {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  line-height: 0;
}

.spinner {
  position: absolute;
  inset: 50% auto auto 50%;
  width: 1.25em;
  height: 1.25em;
  border-radius: 50%;
  border: 2px solid currentColor;
  border-top-color: transparent;
  animation: dynButtonSpin 0.8s linear infinite;
  transform: translate(-50%, -50%);
  z-index: 2;
}

@keyframes dynButtonSpin {
  to {
    transform: translate(-50%, -50%) rotate(360deg);
  }
}

/* REDUCED MOTION */
@media (prefers-reduced-motion: reduce) {
  .root {
    transition: none;
  }
  .spinner {
    animation: none;
  }
}

@media (prefers-contrast: high) {
  .root {
    border-width: var(--dyn-border-width-md, 2px);
  }
  
  .root:focus-visible {
    outline-width: var(--dyn-border-width-lg, 3px);
  }
}
