/**
 * DynStepper Component Styles - Option B: Full Token Integration
 * 100% Design Token Compliance
 */

/* ============================================
   COMPONENT TOKENS
   ============================================ */

.root {
  /* Color tokens - semantic for auto theme switching */
  --dyn-stepper-step-bg-pending: var(--dyn-semantic-background, #ffffff);
  --dyn-stepper-step-bg-active: var(--dyn-theme-primary, #3b82f6);
  --dyn-stepper-step-bg-completed: var(--dyn-theme-primary, #3b82f6);
  --dyn-stepper-step-bg-error: var(--dyn-feedback-negative-default, #ef4444);
  --dyn-stepper-step-text-pending: var(--dyn-semantic-text-secondary, #64748b);
  --dyn-stepper-step-text-active: var(--dyn-semantic-text, #0f172a);
  --dyn-stepper-step-text-completed: var(--dyn-theme-primary, #3b82f6);
  --dyn-stepper-step-text-inverse: var(--dyn-semantic-text-inverse, #ffffff);
  --dyn-stepper-step-border: var(--dyn-semantic-border, #e2e8f0);
  --dyn-stepper-connector-bg: var(--dyn-semantic-border, #e2e8f0);
  --dyn-stepper-connector-active: var(--dyn-theme-primary, #3b82f6);

  /* Size tokens */
  --dyn-stepper-step-size: var(--dyn-stepper-step-size, 32px);
  --dyn-stepper-gap: var(--dyn-spacing-md, 1rem);
  --dyn-stepper-label-gap: var(--dyn-spacing-sm, 0.5rem);

  /* Typography */
  --dyn-stepper-font-size: var(--dyn-font-size-sm, 0.875rem);

  display: flex;
  flex-direction: column;
  width: 100%;
  font-family: inherit;
  font-size: var(--dyn-stepper-font-size);
  gap: var(--dyn-stepper-gap);
}

/* ============================================
   LIST
   ============================================ */

.list {
  display: flex;
  padding: 0;
  margin: 0;
  list-style: none;
  gap: var(--dyn-stepper-gap);
  width: 100%;
  position: relative;
}

.orientationVertical .list {
  flex-direction: column;
}

/* ============================================
   STEP ITEM
   ============================================ */

.item {
  display: flex;
  flex-direction: column;
  align-items: center;
  flex: 1;
  position: relative;
}

.orientationVertical .item {
  flex-direction: row;
  align-items: flex-start;
  flex: 0 0 auto;
}

/* ============================================
   CONNECTORS
   ============================================ */

.item:not(:last-child)::after {
  content: '';
  position: absolute;
  background-color: var(--dyn-stepper-connector-bg);
  transition: background-color var(--dyn-transition-fast);
}

.root:not(.orientationVertical) .item:not(:last-child)::after {
  top: calc(var(--dyn-stepper-step-size) / 2 - 1px);
  left: calc(50% + var(--dyn-stepper-step-size) / 2 + var(--dyn-stepper-gap) / 2);
  width: calc(100% - var(--dyn-stepper-step-size) - var(--dyn-stepper-gap));
  height: var(--dyn-stepper-bar-height, 4px);
}

.orientationVertical .item:not(:last-child)::after {
  left: calc(var(--dyn-stepper-step-size) / 2 - 1px);
  top: calc(var(--dyn-stepper-step-size) + 4px);
  height: calc(100% - var(--dyn-stepper-step-size) + var(--dyn-stepper-gap) - 8px);
  width: var(--dyn-stepper-bar-height, 4px);
}

.itemCompleted:not(:last-child)::after {
  background-color: var(--dyn-stepper-connector-active);
}

/* ============================================
   BUTTON
   ============================================ */

.button {
  appearance: none;
  border: none;
  background: transparent;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: var(--dyn-stepper-label-gap);
  cursor: pointer;
  color: var(--dyn-stepper-step-text-pending);
  width: 100%;
}

.orientationVertical .button {
  flex-direction: row;
  width: auto;
}

.buttonDisabled {
  cursor: not-allowed;
  opacity: 0.6;
}

/* ============================================
   STEP INDEX
   ============================================ */

.stepIndex {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--dyn-stepper-step-size);
  height: var(--dyn-stepper-step-size);
  border-radius: 50%;
  background-color: var(--dyn-stepper-step-bg-pending);
  border: var(--dyn-border-width-sm, 1px) solid var(--dyn-stepper-step-border);
  color: var(--dyn-stepper-step-text-pending);
  font-weight: var(--dyn-font-weight-semibold);
  transition: all var(--dyn-transition-fast);
  z-index: 1;
}

.itemCurrent .stepIndex {
  background-color: var(--dyn-stepper-step-bg-active);
  border-color: var(--dyn-stepper-step-bg-active);
  color: var(--dyn-stepper-step-text-inverse);
}

.itemCompleted .stepIndex {
  background-color: var(--dyn-stepper-step-bg-completed);
  border-color: var(--dyn-stepper-step-bg-completed);
  color: var(--dyn-stepper-step-text-inverse);
}

.itemError .stepIndex {
  background-color: var(--dyn-stepper-step-bg-error);
  border-color: var(--dyn-stepper-step-bg-error);
  color: var(--dyn-stepper-step-text-inverse);
}

/* ============================================
   LABEL
   ============================================ */

.stepLabel {
  font-size: var(--dyn-stepper-font-size);
  font-weight: var(--dyn-font-weight-medium);
  text-align: center;
}

.itemCurrent .stepLabel {
  color: var(--dyn-stepper-step-text-active);
  font-weight: var(--dyn-font-weight-semibold);
}

.itemCompleted .stepLabel {
  color: var(--dyn-stepper-step-text-completed);
}

.itemError .stepLabel {
  color: var(--dyn-stepper-step-bg-error);
}

/* ============================================
   ICON
   ============================================ */

.icon {
  width: var(--dyn-stepper-icon-size, 20px);
  height: 20px;
}

/* ============================================
   CONTENT PANEL
   ============================================ */

.panel {
  width: 100%;
  padding-top: var(--dyn-spacing-lg);
}

.orientationVertical .panel {
  padding-left: calc(var(--dyn-stepper-step-size) + var(--dyn-stepper-gap));
  padding-top: 0;
  margin-top: calc(var(--dyn-stepper-step-size) * -1 + 4px);
  margin-bottom: var(--dyn-spacing-lg);
}

.panelHidden {
  display: none;
}

/* ============================================
   DESCRIPTION / OPTIONAL
   ============================================ */

.description {
  font-size: var(--dyn-font-size-xs);
  color: var(--dyn-stepper-step-text-pending);
  margin-top: var(--dyn-spacing-xs);
}

.optional {
  font-size: var(--dyn-font-size-2xs);
  color: var(--dyn-stepper-step-text-pending);
  font-style: italic;
}

/* ============================================
   PROGRESS BAR VARIANT
   ============================================ */

.progressBar {
  height: var(--dyn-stepper-bar-height, 4px);
  background-color: var(--dyn-stepper-connector-bg);
  border-radius: var(--dyn-stepper-bar-radius, 2px);
  margin: var(--dyn-spacing-md) 0;
  width: 100%;
  overflow: hidden;
}

.progressFill {
  height: 100%;
  background-color: var(--dyn-stepper-step-bg-active);
  transition: width 0.3s ease;
}

/* ============================================
   ACCESSIBILITY
   ============================================ */

@media (prefers-reduced-motion: reduce) {

  .stepIndex,
  .item::after,
  .progressFill {
    transition: none;
  }
}

/* ============================================
   VARIANTS
   ============================================ */

/* Variant: Numbered (Default-like but specific) */
.variant-numbered .stepIndex {
  /* Inherits standard look */
}

/* Variant: Dots */
.variant-dots .stepIndex {
  width: 12px;
  height: 12px;
  min-width: 12px; /* Ensure it doesn't shrink */
  padding: 0;
  border-radius: 50%;
  color: transparent; /* Hide number */
  background-color: var(--dyn-stepper-step-border);
  border: none;
}
.variant-dots .itemCurrent .stepIndex {
  background-color: var(--dyn-stepper-step-bg-active);
  transform: scale(1.3);
}
.variant-dots .itemCompleted .stepIndex {
  background-color: var(--dyn-stepper-step-bg-completed);
}

/* Variant: Tabs */
.variant-tabs .list {
  background-color: var(--dyn-stepper-step-bg-pending);
  border-bottom: 1px solid var(--dyn-stepper-step-border);
  gap: 0;
}
.variant-tabs .item {
  flex: 1;
}
.variant-tabs .item::after {
  display: none; /* No connectors in tabs */
}
.variant-tabs .button {
  flex-direction: row;
  justify-content: center;
  padding: var(--dyn-spacing-md);
  border-bottom: 2px solid transparent;
  width: 100%;
  gap: var(--dyn-spacing-sm);
  border-radius: 0;
}
.variant-tabs .itemCurrent .button {
  border-bottom-color: var(--dyn-stepper-step-bg-active);
  color: var(--dyn-stepper-step-bg-active);
}
.variant-tabs .stepIndex {
  display: none; /* Usually tabs don't show circle index, just icon/text */
}
.variant-tabs .stepLabel {
  font-weight: var(--dyn-font-weight-medium);
}
.variant-tabs.orientation-vertical .list {
  flex-direction: column;
  border-bottom: none;
  border-right: 1px solid var(--dyn-stepper-step-border);
}

/* Variant: Progress (already handled by specific progress bar, but hide list items?) */
/* Usually progress variant implies showing just the bar or a simplified view */

/* ============================================
   SIZES
   ============================================ */

.size-small {
  --dyn-stepper-step-size: 24px;
  --dyn-stepper-font-size: var(--dyn-font-size-xs);
  --dyn-stepper-icon-size: 16px;
}

.size-large {
  --dyn-stepper-step-size: 40px;
  --dyn-stepper-font-size: var(--dyn-font-size-base);
  --dyn-stepper-icon-size: 24px;
}

/* ============================================
   DARK MODE
   Note: Handled automatically via semantic tokens!
   ============================================ */