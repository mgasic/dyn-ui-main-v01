/**
 * DynTabs Component Styles
 * 100% Design Token Compliance - Optimized & Clean
 */

/* ============================================
   BASE CONTAINER
   ============================================ */

.tabs {
  /* Component tokens - scoped to .tabs for better isolation */
  --dyn-tabs-bg: var(--dyn-color-background, var(--color-background, #ffffff));
  --dyn-tabs-header-bg: var(--dyn-color-background-secondary, var(--color-background-secondary, #f8fafc));
  --dyn-tabs-active-bg: var(--dyn-color-background, var(--color-background, #ffffff));
  --dyn-tabs-hover-bg: var(--dyn-color-background-hover, var(--color-background-hover, #f1f5f9));

  --dyn-tabs-text: var(--dyn-color-text-secondary, var(--color-text-secondary, #475569));
  --dyn-tabs-text-hover: var(--dyn-color-primary, var(--color-primary, #2563eb));
  --dyn-tabs-text-active: var(--dyn-color-primary, var(--color-primary, #2563eb));
  --dyn-tabs-content-text: var(--dyn-color-text-primary, var(--color-text-primary, #1e293b));
  --dyn-tabs-text-disabled: var(--dyn-color-text-disabled, var(--color-text-disabled, #94a3b8));

  --dyn-tabs-border: var(--dyn-color-border-light, var(--color-border-light, #e2e8f0));
  --dyn-tabs-indicator: var(--dyn-color-primary, var(--color-primary, #2563eb));
  --dyn-tabs-icon-color: var(--dyn-color-primary, #2563eb);
  --dyn-tabs-icon-color-dark: var(--dyn-color-primary-dark, #60a5fa);

  --dyn-tabs-radius: var(--dyn-border-radius-md, var(--border-radius-md, 0.5rem));
  --dyn-tabs-border-width: var(--dyn-border-width-hairline, var(--border-width-hairline, 1px));
  --dyn-tabs-border-width-active: var(--dyn-border-width-md, 2px);

  --dyn-tabs-gap: 0; /* Seamless by default */
  --dyn-tabs-padding-x: var(--dyn-spacing-lg, var(--spacing-lg, 1rem));
  --dyn-tabs-padding-y: var(--dyn-spacing-sm, var(--spacing-sm, 0.5rem));

  --dyn-tabs-icon-size: var(--dyn-size-icon-sm, 1rem);
  --dyn-tabs-spinner-size: var(--dyn-size-icon-md, 1.5rem);

  display: flex;
  width: 100%;
  background: var(--dyn-tabs-bg);
  border-radius: var(--dyn-tabs-radius);
  overflow: hidden;
  border: var(--dyn-tabs-border-width) solid var(--dyn-tabs-border);
  box-shadow: var(--dyn-shadow-sm, var(--shadow-sm, 0 0.0625rem 0.125rem rgba(15, 23, 42, 0.08)));
  transition: all var(--dyn-duration-normal, 0.2s) var(--dyn-timing-standard, ease);
}

/* ============================================
   POSITIONING
   ============================================ */

.tabsTop {
  flex-direction: column;
}

.tabsBottom {
  flex-direction: column-reverse;
}

.tabsLeft {
  flex-direction: row;
}

.tabsRight {
  flex-direction: row-reverse;
}

.tabsBottom .tablist {
  border-bottom: none;
  border-top: var(--dyn-tabs-border-width) solid var(--dyn-tabs-border);
  padding: 0 var(--dyn-spacing-xs) var(--dyn-spacing-xs) var(--dyn-spacing-xs);
}

.tabsBottom .tab {
  border-radius: 0 0 var(--dyn-border-radius-sm) var(--dyn-border-radius-sm);
}

.tabsBottom .tabActive::after {
  top: calc(-1 * var(--dyn-tabs-border-width));
  bottom: auto;
}

.tabsLeft .tablist,
.tabsRight .tablist {
  flex-direction: column;
  border-bottom: none;
  padding: var(--dyn-spacing-xs);
  min-width: 140px;
}

.tabsLeft .tablist {
  border-right: var(--dyn-tabs-border-width) solid var(--dyn-tabs-border);
}

.tabsRight .tablist {
  border-left: var(--dyn-tabs-border-width) solid var(--dyn-tabs-border);
}

.tabsLeft .tab {
  border-radius: var(--dyn-border-radius-sm) 0 0 var(--dyn-border-radius-sm);
}

.tabsRight .tab {
  border-radius: 0 var(--dyn-border-radius-sm) var(--dyn-border-radius-sm) 0;
}

.tabsLeft .tab,
.tabsRight .tab {
  justify-content: flex-start;
  width: 100%;
}

.tabsLeft .tabActive::after,
.tabsRight .tabActive::after {
  top: 0;
  bottom: 0;
  width: var(--dyn-tabs-border-width-active);
  height: auto;
}

.tabsLeft .tabActive::after {
  right: calc(-1 * var(--dyn-tabs-border-width));
  left: auto;
}

.tabsRight .tabActive::after {
  left: calc(-1 * var(--dyn-tabs-border-width));
  right: auto;
}

/* ============================================
   DARK MODE
   ============================================ */

:global(.theme-dark) .tabs,
:global([data-theme='dark']) .tabs,
:global([data-theme='dark']).tabs {
  --dyn-tabs-bg: var(--dyn-semantic-surface-muted, #1f2937);
  --dyn-tabs-header-bg: var(--dyn-semantic-surface-card, #374151);
  --dyn-tabs-active-bg: var(--dyn-semantic-surface-muted, #1f2937);
  --dyn-tabs-hover-bg: var(--dyn-semantic-surface-hover, #374151);
  
  --dyn-tabs-text: var(--dyn-semantic-text-secondary, #9ca3af);
  --dyn-tabs-text-hover: var(--dyn-theme-primary-light, #60a5fa);
  --dyn-tabs-text-active: var(--dyn-theme-primary-light, #60a5fa);
  --dyn-tabs-content-text: var(--dyn-semantic-text, #f9fafb);
  --dyn-tabs-text-disabled: var(--dyn-semantic-text-disabled, #4b5563);
  
  --dyn-tabs-border: var(--dyn-semantic-border, #374151);
  --dyn-tabs-indicator: var(--dyn-theme-primary-light, #60a5fa);
  --dyn-tabs-icon-color: var(--dyn-theme-primary-light, #60a5fa);
}

/* ============================================
   TAB LIST
   ============================================ */

.tablist {
  display: flex;
  position: relative;
  background: var(--dyn-tabs-header-bg);
  margin: 0;
  padding: 0;
  list-style: none;
  z-index: 1;
  gap: var(--dyn-tabs-gap);
  border-bottom: var(--dyn-tabs-border-width) solid var(--dyn-tabs-border);
  flex-wrap: nowrap;
  width: 100%;
  min-width: 0;
}

.tabsFitted .tablist {
  width: 100%;
}

/* Restore gap and padding for Pills */
.tabsPills .tablist {
  gap: var(--dyn-spacing-xxs);
  padding: var(--dyn-spacing-xs);
}

/* Restore padding for Underlined */
.tabsUnderlined .tablist {
  padding: 0 var(--dyn-spacing-xs);
}

.scrollable .tablist {
  overflow-x: auto;
  overflow-y: hidden;
  scrollbar-width: thin;
  scrollbar-color: var(--dyn-tabs-border) transparent;
}

.scrollable .tablist::-webkit-scrollbar {
  height: var(--dyn-spacing-sm, 0.5rem);
}

.scrollable .tablist::-webkit-scrollbar-thumb {
  background: var(--dyn-tabs-border);
  border-radius: var(--dyn-border-radius-full);
}

/* ============================================
   TAB BUTTON
   ============================================ */

.tab {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--dyn-tabs-padding-y) var(--dyn-tabs-padding-x);
  background: transparent;
  border: none;
  border-radius: var(--dyn-border-radius-sm) var(--dyn-border-radius-sm) 0 0;
  cursor: pointer;
  color: var(--dyn-tabs-text);
  font-family: var(--dyn-font-family, inherit);
  font-size: var(--dyn-font-size-sm, 0.875rem);
  font-weight: var(--dyn-font-weight-medium, 500);
  transition: all var(--dyn-duration-normal, 0.2s) var(--dyn-timing-standard, ease);
  white-space: nowrap;
  position: relative;
  flex-shrink: 0;
  min-height: var(--dyn-spacing-3xl, 3rem);
}

.tabsFitted .tab {
  flex: 1;
  min-width: 0;
}

.icon {
  color: var(--dyn-tabs-icon-color);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  margin-right: var(--dyn-spacing-xxs);
}

.tab:hover:not(.tabDisabled) {
  color: var(--dyn-tabs-text-hover);
  background: var(--dyn-tabs-hover-bg);
}

.tabActive {
  color: var(--dyn-tabs-text-active);
  background: var(--dyn-tabs-active-bg);
  font-weight: var(--dyn-font-weight-semibold, 600);
}

.tabActive::after {
  content: '';
  position: absolute;
  bottom: calc(-1 * var(--dyn-tabs-border-width));
  left: 0;
  right: 0;
  height: var(--dyn-tabs-border-width-active);
  background-color: var(--dyn-tabs-indicator);
}

.tabDisabled {
  opacity: var(--dyn-opacity-disabled, 0.5);
  cursor: not-allowed;
  color: var(--dyn-tabs-text-disabled);
}

/* ============================================
   SIZE VARIANTS
   ============================================ */

.tab.sizeSmall {
  min-height: var(--dyn-spacing-2xl, 2rem) !important;
  padding: var(--dyn-spacing-xxs) var(--dyn-spacing-sm) !important;
  font-size: var(--dyn-font-size-xs, 0.75rem) !important;
}

.tab.sizeMedium {
  min-height: var(--dyn-size-md, 2.75rem) !important;
  padding: var(--dyn-spacing-xs) var(--dyn-spacing-md) !important;
  font-size: var(--dyn-font-size-sm, 0.875rem) !important;
}

.tab.sizeLarge {
  min-height: var(--dyn-size-lg, 3.5rem) !important;
  padding: var(--dyn-spacing-md) var(--dyn-spacing-xl) !important;
  font-size: var(--dyn-font-size-base, 1rem) !important;
}

/* ============================================
   STYLE VARIANTS
   ============================================ */

.variantPill {
  border-radius: var(--dyn-border-radius-pill, 9999px) !important;
  margin: var(--dyn-spacing-xxs);
  padding: var(--dyn-spacing-xs) var(--dyn-spacing-md);
}

.variantPill.tabActive {
  background: var(--dyn-tabs-indicator) !important;
  color: var(--dyn-color-primary-contrast, #ffffff) !important;
}

.variantPill.tabActive::after {
  display: none;
}

.variantUnderlined .tab {
  border-radius: 0 !important;
  background: transparent !important;
}

.variantUnderlined.tabActive::after {
  height: var(--dyn-border-width-thick, 3px);
  bottom: 0;
}

.variantBordered {
  border: var(--dyn-tabs-border-width) solid var(--dyn-tabs-border);
}

/* Seamless Borders Logic */
.tabsTop .variantBordered,
.tabsBottom .variantBordered {
  margin-right: calc(-1 * var(--dyn-tabs-border-width));
}

.tabsLeft .variantBordered,
.tabsRight .variantBordered {
  margin-bottom: calc(-1 * var(--dyn-tabs-border-width));
}
/* End Seamless Borders Logic */

.variantBordered.tabActive {
  border-color: var(--dyn-tabs-border) var(--dyn-tabs-border) var(--dyn-tabs-active-bg);
  background: var(--dyn-tabs-active-bg);
  z-index: 2; /* Ensure active tab sits on top of neighbors */
}

.variantBordered.tabActive::after {
  display: none;
}

/* ============================================
   INTERACTIVE ELEMENTS
   ============================================ */

.tab [class*="dynIcon"],
.tab svg,
.closeButton [class*="dynIcon"],
.closeButton svg,
.addableButton [class*="dynIcon"],
.addableButton svg {
  width: var(--dyn-tabs-icon-size) !important;
  height: var(--dyn-tabs-icon-size) !important;
}

.closeButton {
  display: flex;
  align-items: center;
  justify-content: center;
  width: var(--dyn-spacing-xl);
  height: var(--dyn-spacing-xl);
  border-radius: var(--dyn-border-radius-xs);
  border: none;
  background: transparent;
  color: inherit;
  cursor: pointer;
  opacity: var(--dyn-opacity-disabled, 0.5);
  margin-left: var(--dyn-spacing-xs);
  transition: opacity var(--dyn-duration-fast, 0.1s);
}

.closeButton:hover {
  opacity: 1;
  background: var(--dyn-color-error-alpha, rgba(220, 38, 38, 0.1));
  color: var(--dyn-color-error, #dc2626);
}

.addableButton {
  display: flex;
  align-items: center;
  justify-content: center;
  align-self: center;
  width: var(--dyn-spacing-2xl);
  height: var(--dyn-spacing-2xl);
  margin-left: var(--dyn-spacing-md);
  border-radius: var(--dyn-border-radius-full);
  border: var(--dyn-tabs-border-width) dashed var(--dyn-tabs-border);
  background: transparent;
  color: var(--dyn-tabs-text);
  cursor: pointer;
  transition: all var(--dyn-duration-normal);
}

.addableButton:hover {
  background: var(--dyn-tabs-hover-bg);
  border-style: solid;
}

/* ============================================
   PANEL & LOADING
   ============================================ */

.panel {
  flex: 1;
  padding: var(--dyn-spacing-lg);
  background: var(--dyn-tabs-active-bg);
  color: var(--dyn-tabs-content-text);
  min-height: var(--dyn-spacing-3xl);
}

.loading {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--dyn-spacing-3xl);
  gap: var(--dyn-spacing-md);
  color: var(--dyn-tabs-text);
  min-height: var(--dyn-spacing-4xl, 12.5rem);
}

.loadingSpinner {
  animation: dynTabsSpin var(--dyn-duration-deliberate, 1s) linear infinite;
}

@keyframes dynTabsSpin {
  to {
    transform: rotate(360deg);
  }
}